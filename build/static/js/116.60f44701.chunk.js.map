{"version":3,"file":"static/js/116.60f44701.chunk.js","mappings":"4NACA,GAAgB,MAAQ,4BAA4B,MAAQ,4BAA4B,OAAS,6BAA6B,IAAM,0BAA0B,YAAc,kCAAkC,UAAY,iC,SCsE1N,EA7DqB,WAAO,IAAD,EAC1B,GAA4BA,EAAAA,EAAAA,UAAS,IAAG,eAAjCC,EAAM,KAAEC,EAAS,KAEhBC,GAAYC,EAAAA,EAAAA,MAAZD,QACFE,GAAWC,EAAAA,EAAAA,OAEjBC,EAAAA,EAAAA,YAAU,YACTC,EAAAA,EAAAA,IAAUL,GAASM,MAAK,SAAAC,GAAI,OAAIR,EAAUQ,EAAKA,KAAKT,OAAO,GAC5D,GAAG,CAACE,IAEJ,IA0BMQ,EAAqB,QAAZ,EAAGV,EAAO,UAAE,aAAT,EAAWE,QAAQS,KACrC,OACC,qBAASC,UAAWC,EAAAA,QAAgB,WACnC,eAAID,UAAWC,EAAAA,MAAc,0LAAqCH,EAAS,QAC3E,gBAAKE,UAAWC,EAAAA,MAAc,SAC5Bb,EAAOc,OACLd,EAAOe,KAAI,SAAAC,GAAK,OAChB,iBAAKJ,UAAWC,EAAAA,OAAe,WAC9B,gBACCD,UAAWC,EAAAA,IACXI,IAAG,UAhDGC,2BAgDQ,YAAIF,EAAMG,gBACxBC,IAAKJ,EAAMd,QAAQS,QAEpB,iBAAKC,UAAWC,EAAAA,UAAkB,UAAC,mCAAQG,EAAMK,UAAUC,aAC3D,gBAAKV,UAAWC,EAAAA,YAAoB,UACnC,SAACU,EAAA,EAAW,CAACC,SAAU,kBAzCX,SAAAC,GAEnB,IADgBC,OAAOC,QAAQ,6OAE9B,OAAOvB,GACNwB,EAAAA,EAAAA,GAAS,CACRC,QAAQ,qJACRC,KAAM,UACNC,UAAU,MAGbC,EAAAA,EAAAA,GAAgBP,GACdjB,MAAK,SAAAC,GAAS,IAAD,EACbR,EAAUQ,EAAKA,KAAKT,QACpBI,GAASwB,EAAAA,EAAAA,GAAS,CAAEC,QAAkB,QAAX,EAAEpB,EAAKA,YAAI,aAAT,EAAWoB,QAASC,KAAM,UAAWC,UAAU,IAC7E,IACCE,OAAM,SAAAC,GACN9B,GACCwB,EAAAA,EAAAA,GAAS,CACRC,QAAS,iOACTC,KAAM,QACNC,UAAU,IAGb,GACF,CAiBqCI,CAAYnB,EAAMoB,IAAI,QARhBpB,EAAMoB,IAUrC,IAEN,iBAIP,C","sources":["webpack://client/./src/Pages/Admin/PhotosDelete/PhotosDelete.module.css?2e8f","Pages/Admin/PhotosDelete/PhotosDelete.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"title\":\"PhotosDelete_title__ckmi1\",\"inner\":\"PhotosDelete_inner__YRPlZ\",\"images\":\"PhotosDelete_images__MSybF\",\"img\":\"PhotosDelete_img__bd4iC\",\"cross__info\":\"PhotosDelete_cross__info__Cp4V6\",\"img__info\":\"PhotosDelete_img__info__-KLK2\"};","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useParams } from 'react-router-dom';\r\nimport { getPhotos, postDeletePhoto } from '../../../api/gallery';\r\nimport ButtonClose from '../../../Components/UI/ButtonClose/ButtonClose';\r\nimport { getAlert } from '../../../redux/features/alertMessageSlice';\r\n\r\nimport classes from './PhotosDelete.module.css';\r\nconst server = process.env.REACT_APP_SERVER_EXPRESS;\r\n\r\nconst PhotosDelete = () => {\r\n\tconst [photos, setPhotos] = useState([]);\r\n\r\n\tconst { albumId } = useParams();\r\n\tconst dispatch = useDispatch();\r\n\r\n\tuseEffect(() => {\r\n\t\tgetPhotos(albumId).then(data => setPhotos(data.data.photos));\r\n\t}, [albumId]);\r\n\r\n\tconst deletePhoto = photoId => {\r\n\t\tconst confirm = window.confirm(`Вы действительно хотите удалить фотографию?`);\r\n\t\tif (!confirm)\r\n\t\t\treturn dispatch(\r\n\t\t\t\tgetAlert({\r\n\t\t\t\t\tmessage: `Отмена удаления фотографии`,\r\n\t\t\t\t\ttype: 'warning',\r\n\t\t\t\t\tisOpened: true,\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\tpostDeletePhoto(photoId)\r\n\t\t\t.then(data => {\r\n\t\t\t\tsetPhotos(data.data.photos);\r\n\t\t\t\tdispatch(getAlert({ message: data.data?.message, type: 'success', isOpened: true }));\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tgetAlert({\r\n\t\t\t\t\t\tmessage: 'Ошибка при удалении фотографии на сервере!',\r\n\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\tisOpened: true,\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst nameAlbum = photos[0]?.albumId.name;\r\n\treturn (\r\n\t\t<section className={classes.wrapper}>\r\n\t\t\t<h2 className={classes.title}>{`Удаление фотографий из альбома \"${nameAlbum}\"`}</h2>\r\n\t\t\t<div className={classes.inner}>\r\n\t\t\t\t{photos.length\r\n\t\t\t\t\t? photos.map(photo => (\r\n\t\t\t\t\t\t\t<div className={classes.images} key={photo._id}>\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tclassName={classes.img}\r\n\t\t\t\t\t\t\t\t\tsrc={`${server}/${photo.urlPhotoMedium}`}\r\n\t\t\t\t\t\t\t\t\talt={photo.albumId.name}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div className={classes.img__info}>Автор: {photo.creatorId.username}</div>\r\n\t\t\t\t\t\t\t\t<div className={classes.cross__info}>\r\n\t\t\t\t\t\t\t\t\t<ButtonClose getClick={() => deletePhoto(photo._id)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t  ))\r\n\t\t\t\t\t: 'Loading...'}\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\nexport default PhotosDelete;\r\n"],"names":["useState","photos","setPhotos","albumId","useParams","dispatch","useDispatch","useEffect","getPhotos","then","data","nameAlbum","name","className","classes","length","map","photo","src","process","urlPhotoMedium","alt","creatorId","username","ButtonClose","getClick","photoId","window","confirm","getAlert","message","type","isOpened","postDeletePhoto","catch","error","deletePhoto","_id"],"sourceRoot":""}