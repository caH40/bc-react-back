{"version":3,"file":"static/js/361.48eb67af.chunk.js","mappings":"qOAgEA,EAxDqB,SAAH,GAAsC,IAAhCA,EAAS,EAATA,UAAWC,EAAa,EAAbA,cAC5BC,GAAWC,EAAAA,EAAAA,MAEjB,OACC,8BACC,4BACC,2BACC,wBAAI,OACJ,wBAAI,8BACJ,wBAAI,wEACJ,wBAAI,sDACJ,wBAAI,4DACJ,wBAAI,uGACJ,wBAAI,2IACJ,wBAAI,sGAGN,2BACEH,EAAUI,KAAI,SAACC,EAASC,GAAK,OAC7B,2BACC,wBAAKA,EAAQ,KACb,wBAAK,IAAIC,KAAKF,EAAQG,MAAMC,wBAC5B,yBACC,gBACCC,UAAWC,EAAAA,EAAAA,gBACXC,IAAG,UA3BIC,2BA2BO,YAAIR,EAAQS,UAC1BC,IAAI,YAGN,eAAIL,UAAWC,EAAAA,EAAAA,YAAoB,SAAEN,EAAQW,QAC7C,wBAAKX,EAAQY,UAAUC,YACvB,yBACC,SAACC,EAAA,EAAM,CAACC,SAAU,kBAAMlB,EAASG,EAAQgB,IAAI,EAAEC,kBAAkB,WAAU,SAAC,sFAI7E,yBACC,SAACH,EAAA,EAAM,CAACC,SAAU,kBAAMlB,EAAS,UAAD,OAAWG,EAAQgB,KAAM,EAAEC,kBAAkB,WAAU,SAAC,sFAIzF,yBACC,SAACH,EAAA,EAAM,CACNC,SAAU,kBAAMnB,EAAcI,EAAQgB,IAAKhB,EAAQW,KAAK,EACxDM,kBAAkB,mBAAkB,SACpC,mDA1BMjB,EAAQgB,IA8BZ,QAKV,E,oBCNA,EAhDoB,WACnB,OAAkCE,EAAAA,EAAAA,UAAS,IAAG,eAAvCvB,EAAS,KAAEwB,EAAY,KAC9B,GAA8BD,EAAAA,EAAAA,WAAS,GAAM,eAAtCE,EAAO,KAAEC,EAAU,KAEpBC,GAAWC,EAAAA,EAAAA,OAEjBC,EAAAA,EAAAA,YAAU,YACTC,EAAAA,EAAAA,MAAeC,MAAK,SAAAC,GACnBR,EAAaQ,EAAKA,KAAKhC,UACxB,GACD,GAAG,CAACyB,IA8BJ,OACC,qBAASf,UAAWC,EAAAA,EAAAA,QAAgB,WACnC,eAAID,UAAWC,EAAAA,EAAAA,MAAc,SAAC,qIAC9B,SAAC,EAAY,CAACX,UAAWA,EAAWC,cA/BhB,SAACgC,EAAWC,GAIjC,IAHgBC,OAAOC,QAAQ,2NAAD,OACeF,EAAW,2eAGvD,OAAOP,GACNU,EAAAA,EAAAA,GAAS,CACRC,QAAQ,qIAAD,OAA8BJ,EAAW,KAChDK,KAAM,UACNC,UAAU,MAGbC,EAAAA,EAAAA,IAAkBR,GAChBF,MAAK,SAAAC,GAAS,IAAD,EACbL,GAASU,EAAAA,EAAAA,GAAS,CAAEC,QAAkB,QAAX,EAAEN,EAAKA,YAAI,aAAT,EAAWM,QAASC,KAAM,UAAWC,UAAU,IAC7E,IACCE,OAAM,SAAAC,GACNhB,GACCU,EAAAA,EAAAA,GAAS,CACRC,QAAS,+MACTC,KAAM,QACNC,UAAU,IAGb,IACCI,SAAQ,kBAAMlB,GAAW,SAAAmB,GAAI,OAAKA,CAAI,GAAC,GAC1C,MAQD,C,qBCrDA,KAAgB,QAAU,4BAA4B,MAAQ,0BAA0B,aAAe,iC","sources":["Components/Table/Gallery/TableGallery.jsx","Pages/Admin/GalleryEdit.jsx","webpack://client/./src/Pages/PagesCss/NewsCreate.module.css?d1ad"],"sourcesContent":["import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nimport Button from '../../UI/Button/Button';\r\nimport classes from '../Table.module.css';\r\n\r\nconst server = process.env.REACT_APP_SERVER_EXPRESS;\r\n\r\nconst TableGallery = ({ galleries, deleteGallery }) => {\r\n\tconst navigate = useNavigate();\r\n\r\n\treturn (\r\n\t\t<table>\r\n\t\t\t<thead>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>#</th>\r\n\t\t\t\t\t<th>Дата</th>\r\n\t\t\t\t\t<th>Изображение</th>\r\n\t\t\t\t\t<th>Название</th>\r\n\t\t\t\t\t<th>Создатель</th>\r\n\t\t\t\t\t<th>Изменение галереи</th>\r\n\t\t\t\t\t<th>Редактирование альбомов</th>\r\n\t\t\t\t\t<th>Удаление галереи</th>\r\n\t\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t\t<tbody>\r\n\t\t\t\t{galleries.map((gallery, index) => (\r\n\t\t\t\t\t<tr key={gallery._id}>\r\n\t\t\t\t\t\t<td>{index + 1}</td>\r\n\t\t\t\t\t\t<td>{new Date(gallery.date).toLocaleDateString()}</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tclassName={classes.td__news__image}\r\n\t\t\t\t\t\t\t\tsrc={`${server}/${gallery.urlCover}`}\r\n\t\t\t\t\t\t\t\talt=\"news\"\r\n\t\t\t\t\t\t\t></img>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td className={classes.align__left}>{gallery.name}</td>\r\n\t\t\t\t\t\t<td>{gallery.creatorId.username}</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<Button getClick={() => navigate(gallery._id)} additionalClasses=\"td__link\">\r\n\t\t\t\t\t\t\t\tРедактировать\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<Button getClick={() => navigate(`albums/${gallery._id}`)} additionalClasses=\"td__link\">\r\n\t\t\t\t\t\t\t\tРедактировать\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tgetClick={() => deleteGallery(gallery._id, gallery.name)}\r\n\t\t\t\t\t\t\t\tadditionalClasses=\"td__link warning\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tУдалить\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t))}\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t);\r\n};\r\n\r\nexport default TableGallery;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { getGalleries, postDeleteGallery } from '../../api/gallery';\r\nimport TableGallery from '../../Components/Table/Gallery/TableGallery';\r\nimport { getAlert } from '../../redux/features/alertMessageSlice';\r\n\r\nimport classes from '../PagesCss/NewsCreate.module.css';\r\n\r\nconst GalleryEdit = () => {\r\n\tconst [galleries, setGalleries] = useState([]);\r\n\tconst [trigger, setTrigger] = useState(false);\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\tuseEffect(() => {\r\n\t\tgetGalleries().then(data => {\r\n\t\t\tsetGalleries(data.data.galleries);\r\n\t\t});\r\n\t}, [trigger]);\r\n\r\n\tconst deleteGallery = (galleryId, galleryName) => {\r\n\t\tconst confirm = window.confirm(\r\n\t\t\t`Вы действительно хотите удалить галерею \"${galleryName}\"?\\nВсе альбомы и фотографии из данной галереи будут удалены, без возможности их восстановления!`\r\n\t\t);\r\n\t\tif (!confirm)\r\n\t\t\treturn dispatch(\r\n\t\t\t\tgetAlert({\r\n\t\t\t\t\tmessage: `Отмена удаления галереи \"${galleryName}\"`,\r\n\t\t\t\t\ttype: 'warning',\r\n\t\t\t\t\tisOpened: true,\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\tpostDeleteGallery(galleryId)\r\n\t\t\t.then(data => {\r\n\t\t\t\tdispatch(getAlert({ message: data.data?.message, type: 'success', isOpened: true }));\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tgetAlert({\r\n\t\t\t\t\t\tmessage: 'Ошибка при удалении галереи на сервере!',\r\n\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\tisOpened: true,\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t})\r\n\t\t\t.finally(() => setTrigger(prev => !prev));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<section className={classes.wrapper}>\r\n\t\t\t<h2 className={classes.title}>Редактирование галереи</h2>\r\n\t\t\t<TableGallery galleries={galleries} deleteGallery={deleteGallery} />\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\nexport default GalleryEdit;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"NewsCreate_wrapper__3beFw\",\"title\":\"NewsCreate_title__W7Lp3\",\"box__buttons\":\"NewsCreate_box__buttons__hvllH\"};"],"names":["galleries","deleteGallery","navigate","useNavigate","map","gallery","index","Date","date","toLocaleDateString","className","classes","src","process","urlCover","alt","name","creatorId","username","Button","getClick","_id","additionalClasses","useState","setGalleries","trigger","setTrigger","dispatch","useDispatch","useEffect","getGalleries","then","data","galleryId","galleryName","window","confirm","getAlert","message","type","isOpened","postDeleteGallery","catch","error","finally","prev"],"sourceRoot":""}