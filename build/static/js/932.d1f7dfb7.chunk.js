"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[932],{2481:function(e,t,s){s(2791);var n=s(6907),r=s(184);t.Z=function(){return(0,r.jsx)(n.ql,{children:(0,r.jsx)("meta",{name:"robots",content:"noindex, nofollow, noarchive"})})}},6244:function(e,t,s){s.d(t,{Z:function(){return x}});var n=s(4942),r=s(1413),i=(s(2791),s(9442)),o="ImagesURLBox_block__picture__sKz5H",a="ImagesURLBox_box__img__sxZ6w",c="ImagesURLBox_img__info__qUI+W",l="ImagesURLBox_cross__info__Gd8K9",_="ImagesURLBox_img__iB-BE",m=s(184),x=function(e){var t,s=e.form,x=e.setForm,u=e.boxStyle,d=e.keyObject;return(0,m.jsx)("div",{className:o,children:null!==(t=s[d])&&void 0!==t&&t.length?s[d].map((function(e,t){return(0,m.jsxs)("div",{className:a,style:u,children:[(0,m.jsx)("img",{className:_,src:e.source,alt:"news"}),(0,m.jsxs)("div",{className:c,children:[(0,m.jsx)("span",{children:e.name}),(0,m.jsxs)("span",{children:[e.size,"kB"]})]}),(0,m.jsx)("div",{className:l,children:(0,m.jsx)(i.Z,{getClick:function(){return t=e.name,void x((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,n.Z)({},d,e[d].filter((function(e){return e.name!==t}))))}));var t}})})]},t+e.name)})):void 0})}},8671:function(e,t,s){s.d(t,{Z:function(){return w}});var n=s(1413),r=s(9439),i=s(2791),o=s(9434),a=s(7689),c=s(8180),l=s(1882),_=s(6244),m=s(4942),x=s(9442),u={box__img:"ImageURLBox_box__img__z2yNc",img__info:"ImageURLBox_img__info__iEiEy",cross__info:"ImageURLBox_cross__info__AO1uX",img:"ImageURLBox_img__ifz-a"},d=s(184),f=function(e){var t,s=e.form,r=e.setForm,i=e.keyObject;return(0,d.jsx)("div",{className:u.block__picture,children:null!==(t=s[i])&&void 0!==t&&t.source?(0,d.jsxs)("div",{className:u.box__img,children:[(0,d.jsx)("img",{className:u.img,src:s[i].source,alt:"news"}),(0,d.jsxs)("div",{className:u.img__info,children:[(0,d.jsx)("span",{children:s[i].name}),(0,d.jsxs)("span",{children:[s[i].size,"kB"]})]}),(0,d.jsx)("div",{className:u.cross__info,children:(0,d.jsx)(x.Z,{getClick:function(){r((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,m.Z)({},i,{}))}))}})})]}):void 0})},j=s(7023),b=s(6750),v=s(4165),h=s(3433),p=s(5861),Z=s(5886),k=s(6369),g=s(6074),y="InputFilesURLBox_box__input__261d0",F="InputFilesURLBox_box__interactive__2rJwj",N="InputFilesURLBox_box__title__dAP7U",C=function(e){var t=e.form,s=e.setForm,r=e.title,i=e.boxStyle;return(0,d.jsxs)("div",{className:y,style:i,children:[(0,d.jsx)("h2",{className:N,children:r}),(0,d.jsxs)("div",{className:F,children:[(0,d.jsx)("div",{children:(0,d.jsx)(k.Z,{getClick:function(e){var t=e.target.files;if(t.length)for(var r=function(e){var r=Math.trunc(t[e].size/8e3),i=new FileReader;i.readAsDataURL(t[e]),i.onload=(0,p.Z)((0,v.Z)().mark((function o(){var a;return(0,v.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,Z.M)(i.result,.625,800);case 2:a=o.sent,s((function(s){return(0,n.Z)((0,n.Z)({},s),{},{descPhotos:[].concat((0,h.Z)(s.descPhotos),[{source:a,name:t[e].name,size:r}])})}));case 4:case"end":return o.stop()}}),o)})))},i=0;i<t.length;i++)r(i)},multiple:!0,children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0444\u0430\u0439\u043b\u044b"})}),(0,d.jsx)(g.Z,{isCompleted:t.descPhotos.length})]})]})},B={box__input:"InputFileTrekBox_box__input__Yjsi4",box__interactive:"InputFileTrekBox_box__interactive__WznKp",box__title:"InputFileTrekBox_box__title__qL7QA",file:"InputFileTrekBox_file__UB7Fo","mr-10":"InputFileTrekBox_mr-10__jzTje"},T=function(e){var t,s=e.fileRef,r=e.setForm,i=e.title,o=e.boxClass,a=e.keyObject;return(0,d.jsxs)("div",{className:"".concat(B.box__input," ").concat(B[o]),children:[(0,d.jsx)("h2",{className:B.box__title,children:i}),(0,d.jsxs)("div",{className:B.box__interactive,children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(k.Z,{getClick:function(e){s.current={source:e.target.files[0]},r((function(t){return(0,n.Z)((0,n.Z)({},t),{},(0,m.Z)({},a,e.target.files[0].name))}))},accept:".gpx, .fit, .tcx",children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0444\u0430\u0439\u043b"}),(0,d.jsx)("span",{className:B.file,children:null===(t=s.current.source)||void 0===t?void 0:t.name})]}),(0,d.jsx)(g.Z,{isCompleted:s.current})]})]})},I=s(6767),O=s(6433),R=s(7772),U={block:"FormTrailEdit_block__GmAic"};var P={nameRoute:"",state:"",bikeType:"",start:"",turn:"",finish:"",distance:"",ascent:"",descriptionArea:"",cardPhoto:{},fileTrekName:"",urlVideo:"",urlTrekGConnect:"",descPhotos:[]},w=function(e){var t=e.trail,s=e.type,m=(0,i.useState)((function(){if(!t)return P;var e=(0,n.Z)((0,n.Z)({},t),{},{cardPhoto:{source:t.cardPhoto}}),s=t.descPhoto.map((function(e,t){return{source:e,name:"name-".concat(t)}}));return(0,n.Z)((0,n.Z)({},e),{},{descPhoto:t.descPhotos,descPhotos:s})})),x=(0,r.Z)(m,2),u=x[0],v=x[1],h=(0,i.useRef)(t?{old:t.fileTrekName}:""),p=(0,o.I0)(),Z=(0,a.s0)();return(0,d.jsxs)("form",{className:U.form,children:[(0,d.jsxs)("div",{className:U.block,children:[(0,d.jsx)(O.Z,{form:u,setForm:v,keyObject:"state",title:"\u0420\u0435\u0441\u043f\u0443\u0431\u043b\u0438\u043a\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430:",values:[{id:0,name:""},{id:1,name:"\u041a\u0430\u0432\u041c\u0438\u043d\u0412\u043e\u0434\u044b"},{id:2,name:"\u041a\u0430\u0440\u0430\u0447\u0430\u0435\u0432\u043e-\u0427\u0435\u0440\u043a\u0435\u0441\u0441\u0438\u044f"},{id:3,name:"\u041a\u0430\u0431\u0430\u0440\u0434\u0438\u043d\u043e-\u0411\u0430\u043b\u043a\u0430\u0440\u0438\u044f"},{id:4,name:"\u0421\u0435\u0432\u0435\u0440\u043d\u0430\u044f \u041e\u0441\u0435\u0442\u0438\u044f"},{id:5,name:"\u0410\u0434\u044b\u0433\u0435\u044f"}],boxClass:"mr-10"}),(0,d.jsx)(O.Z,{form:u,setForm:v,keyObject:"bikeType",title:"\u0422\u0438\u043f \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438:",values:[{id:0,name:""},{id:1,name:"\u0428\u043e\u0441\u0441\u0435\u0439\u043d\u044b\u0439"},{id:2,name:"\u0413\u043e\u0440\u043d\u044b\u0439"}],boxClass:"mr-10"}),(0,d.jsx)(b.Z,{form:u,setForm:v,keyObject:"nameRoute",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430:",type:"text",boxClass:"mr-10"}),(0,d.jsx)(b.Z,{form:u,setForm:v,keyObject:"start",title:"\u041c\u0435\u0441\u0442\u043e \u0441\u0442\u0430\u0440\u0442\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430:",type:"text",boxClass:"mr-10"}),(0,d.jsx)(b.Z,{form:u,setForm:v,keyObject:"turn",title:"\u041c\u0435\u0441\u0442\u043e \u0440\u0430\u0437\u0432\u043e\u0440\u043e\u0442\u0430:",type:"text",boxClass:"mr-10"}),(0,d.jsx)(b.Z,{form:u,setForm:v,keyObject:"finish",title:"\u041c\u0435\u0441\u0442\u043e \u0444\u0438\u043d\u0438\u0448\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430:",type:"text",boxClass:"mr-10"}),(0,d.jsx)(b.Z,{form:u,setForm:v,keyObject:"distance",title:"\u0414\u043b\u0438\u043d\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430 \u0432 \u043a\u0438\u043b\u043e\u043c\u0435\u0442\u0440\u0430\u0445:",type:"number",boxClass:"mr-10"}),(0,d.jsx)(b.Z,{form:u,setForm:v,keyObject:"ascent",title:"\u041e\u0431\u0449\u0438\u0439 \u043d\u0430\u0431\u043e\u0440 \u0432 \u043c\u0435\u0442\u0440\u0430\u0445 \u043d\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0435:",type:"number",boxClass:"mr-10"}),(0,d.jsx)(b.Z,{form:u,setForm:v,keyObject:"urlTrekGConnect",title:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442 \u0432 GConnect:",type:"text",boxClass:"mr-10"}),(0,d.jsx)(b.Z,{form:u,setForm:v,keyObject:"urlVideo",title:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0432\u0438\u0434\u0435\u043e \u0441 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430:",type:"text",boxClass:"mr-10"}),(0,d.jsx)(T,{fileRef:h,keyObject:"fileTrekName",setForm:v,title:"\u0422\u0440\u0435\u043a \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 FIT/GPX/TCX:",boxClass:"mr-10"}),(0,d.jsx)(R.Z,{form:u,setForm:v,title:"\u0411\u043b\u043e\u043a \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0433\u043e \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430. \u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438, \u0434\u0435\u0442\u0430\u043b\u0438, \u0434\u043e\u0441\u0442\u043e\u043f\u0440\u0438\u043c\u0435\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438, \u0432\u0430\u0436\u043d\u044b\u0435 \u043c\u043e\u043c\u0435\u043d\u0442\u044b \u043d\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0435.",keyObject:"descriptionArea",boxClass:"mr-10"})]}),(0,d.jsxs)("div",{className:U.block,children:[(0,d.jsx)(I.Z,{form:u,setForm:v,title:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u0434\u043b\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438:",keyObject:"cardPhoto",boxClass:"mr-10"}),(0,d.jsx)(f,{form:u,setForm:v,keyObject:"cardPhoto"})]}),(0,d.jsx)(C,{form:u,setForm:v,title:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 \u0434\u043b\u044f \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f:",boxClass:"mr-10"}),(0,d.jsx)(_.Z,{form:u,setForm:v,boxClass:"mr-10"}),(0,d.jsx)(j.Z,{sendForm:function(e){e.preventDefault();var t=function(e){var t;return console.log(e.fileTrekName),!!(e.ascent&&e.bikeType&&null!==(t=e.cardPhoto)&&void 0!==t&&t.source&&e.descPhotos.length&&e.descriptionArea&&e.distance&&e.fileTrekName&&e.finish&&e.nameRoute&&e.start&&e.state&&e.turn&&e.urlTrekGConnect)}(u);if(!t)return p((0,l.u)({message:"\u041d\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b!",type:"warning",isOpened:!0}));if(!h.old){var n=function(e){var t=new FormData;return t.append("files",e),t}(h.current.source);(0,c.SN)(n).catch((function(e){return console.log(e)}))}(0,c.mZ)(u,s).then((function(e){200===(null===e||void 0===e?void 0:e.status)&&p((0,l.u)({message:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435!",type:"success",isOpened:!0})),Z("/trails/".concat(e.data.trailId))})).finally((function(){h.current="",v(P)}))},title:"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0444\u043e\u0440\u043c\u044b \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440!"})]})}},6433:function(e,t,s){s.d(t,{Z:function(){return c}});var n=s(4942),r=s(1413),i=(s(2791),s(6074)),o={box__input:"SelectBox_box__input__MCdVC",box__title:"SelectBox_box__title__wgd0K",box__interactive:"SelectBox_box__interactive__0a4yZ",select:"SelectBox_select__SqTmR",option:"SelectBox_option__Uc8JE","mr-10":"SelectBox_mr-10__YbUw+"},a=s(184),c=function(e){var t=e.title,s=e.setForm,c=e.form,l=e.keyObject,_=e.values,m=e.boxClass;return(0,a.jsxs)("div",{className:"".concat(o.box__input," ").concat(o[m]),children:[(0,a.jsx)("h2",{className:o.box__title,children:t}),(0,a.jsxs)("div",{className:o.box__interactive,children:[(0,a.jsx)("select",{className:o.select,value:c[l],onChange:function(e){return s((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,n.Z)({},l,e.target.value))}))},children:_.map((function(e){return(0,a.jsx)("option",{className:o.option,value:e.name,children:e.name},e.id)}))}),(0,a.jsx)(i.Z,{isCompleted:c[l]})]})]})}},7772:function(e,t,s){s.d(t,{Z:function(){return c}});var n=s(4942),r=s(1413),i=(s(2791),s(6074)),o={box__textarea:"TextArea_box__textarea__43r-x",box__interactive:"TextArea_box__interactive__Jvk79",box__title:"TextArea_box__title__iQAgF",textarea:"TextArea_textarea__V56Zd","mr-10":"TextArea_mr-10__ymiKA"},a=s(184),c=function(e){var t=e.form,s=e.setForm,c=e.title,l=e.keyObject,_=e.boxClass;return(0,a.jsxs)("div",{className:"".concat(o.box__textarea," ").concat(o[_]),children:[(0,a.jsx)("h2",{className:o.box__title,children:c}),(0,a.jsxs)("div",{className:o.box__interactive,children:[(0,a.jsx)("textarea",{value:t[l],onChange:function(e){return s((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,n.Z)({},l,e.target.value))}))},className:o.textarea}),(0,a.jsx)(i.Z,{isCompleted:t[l]})]})]})}},9932:function(e,t,s){s.r(t),s.d(t,{default:function(){return x}});var n=s(9439),r=s(2791),i=s(7689),o=s(8180),a=s(2481),c=s(8671),l="TrailEdit_wrapper__kgoJa",_="TrailEdit_title__F1Ilo",m=s(184),x=function(){var e=(0,r.useState)([]),t=(0,n.Z)(e,2),s=t[0],x=t[1],u=(0,i.UO)({}).trailId;return(0,r.useEffect)((function(){(0,o.Xs)(u,"edit").then((function(e){x(e)}))}),[u]),(0,m.jsxs)("section",{className:l,children:[" ",null!==s&&void 0!==s&&s._id?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a.Z,{}),(0,m.jsx)("h2",{className:_,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430"}),(0,m.jsx)(c.Z,{trail:s,type:"edit"})]}):"Loading..."]})}}}]);
//# sourceMappingURL=932.d1f7dfb7.chunk.js.map